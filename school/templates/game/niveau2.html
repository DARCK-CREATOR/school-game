 <!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
        content="width=device-width,initial-scale=1.0">
        <title>D√©butant 2</title>
        <style>
        body{
            font-family: Georgia, serif;
            text-align: center;
            background-color: #d5f6ff;
       
        }
            


        button {
            font-size: 14px;
            background-color: #6ab8ff;
            border-radius: 20px 20px;
            padding: 15px;
            border: 1px solid #9c95ff;
            width: 70%;
            margin-bottom: 1em;
            color: white;
            font-family: Georgia, serif; 
            box-shadow: 0 2px 2px rgba(0,0,0,0.8);
        }
       

        div {
            border-radius: 10px 10px;
          
            background-color: #ffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.8);
            animation-duration: 3s;
            animation-name: junior;
        }
        @keyframes junior{
            from{ 
                background: blue;
                transform: translateY(80px);
                opacity: 0;
            }
            to {
                background-color: white;
                transform: translateY(0);
               opacity: 1;
            }
        }
     
         h1 {
         font-size: 25px;
         padding: 8px;
     }
     
     dialog{
       
       border-radius: 10px 10px;
       background: #b7fafa;
       border: none;
       width: 60%;
     }
     
     .dialog::backdrop {
       background: rgba(0,0,0,0.3);
     }
     .dialog p {
       white-space: pre-line;
       color: blue;
     }
     .dialog button {
       width: 100%;
     }
     .dialog h1 {
       font-size: 30px;
       color: ;
     }
     .text {
       width: 50%;
     }
   
             </style>
    </head>
    <body>
    
        <div id="reponses">
            <br><br><br>
          <h1 id="quiz"></h1>
          
            <br><br><br>
          
        <button id="btn0" onclick="reponse(0)"></button>
        <button id="btn1" onclick="reponse(1)"></button>
        <button id="btn2" onclick="reponse(2)"></button>
        <button  id="btn3" onclick="reponse(3)"></button>
         <p id="score">Points : 0</p>
         <br>
       </div>
        
         <dialog class="dialog" id="dialog">
          <h1 class="dialog-h1">VICTOIRE  üéâ</h1>
          <button onclick="suivant({{ joueur_id }})">SUIVANT</button>
          <button onclick="profil({{ joueur_id }})">PROFIL</button>
        </dialog>
        
        <dialog class="text" id="text">
          
        </dialog>

        <script>
            
         
         let dialog= document.getElementById("dialog")
          let text= document.getElementById("text")
            setTimeout(function () {
              text.innerHTML=`<p>BIENVENUE AU \n NIVEAU 2</p>`
              text.showModal()
            },2500)
            setTimeout(function () {
              text.close()
            },4000)
            let questionTableau = [
  {
    questions: "De quoi les plantes ont-elles besoin pour grandir ?",
    result: ["Des cailloux", "Du soleil, de l'eau et de la terre","De l'alcool","Des jouets"],
    correction: 1
  
  },
  {
    questions: "Qu'est-ce qui tombe du ciel quand il pleut ?",
    result: ["Du sable", "Des √©toiles", "De l'eau", "Des feuilles"],
    correction: 2
  
  },
  {
    questions: "Quel animal pond des ≈ìufs ?",
    result: ["Un chien", "Un chat", "Un oiseau", "Un cheval"],
    correction: 2
  },
  {
    questions: "Qu'est-ce qui est rond et tourne autour de la Terre ?",
    result: ["Le Soleil", "La Lune", "Une voiture", "Une banane"],
    correction: 1
    
  },
  {
    questions: "Quelle est la couleur du ciel la plupart du temps quand il fait beau ?",
    result: ["Vert", "Rouge", "Bleu", "Jaune"],
    correction: 2
   
  },
  {
    questions: "Qu'est-ce qui est sucr√© et fait par les abeilles ?",
    result: ["Le sel", "Le miel", "Le poivre", "Le vinaigre"],
    correction: 1
 
  },
  {
    questions: "Quelle est la plan√®te sur laquelle nous vivons ?",
    result: ["Mars", "Jupiter", "Terre", "V√©nus"],
    correction: 2
    
  },  { 
    questions: "Quel est le nom du gros poisson qui vit dans la mer ?",
    result: ["Un chat", "Un chien", "Un √©l√©phant", "Une baleine"],
    correction: 3
    
  },
  {
    questions: "Qu'est-ce qu'on utilise pour voir les petites choses de tr√®s pr√®s, comme les microbes ?",
    result: ["Une loupe", "Un t√©lescope", "Un microscope", "Des jumelles"],
    correction: 2
    
  },
  {
    questions: "Quel est le nom de l'organe qui nous permet de penser et d'apprendre ?",
    result: ["Le c≈ìur", "L'estomac", "Le cerveau", "Les pieds"],
    correction: 2
    
  }
]

    
  function cache() {
   setTimeout(function () {
     text.close();
   },1000)
}
  function suivant(id) {
    window.location.href=`/debutant3/${id}/`
  }
  function profil(id) {
    window.location.href=`/profil/${id}/`
  }   
            
             let debutPremiereQuestion = 0;
  let questionPoser= [];
                  
let divElement = document.getElementById("reponses");
            
let scoreElement = document.getElementById("score");
let joueur_id = {{ joueur_id }}
            
let questionElement = document.getElementById("quiz");
let score = {{ score.score  }}
scoreElement.innerText = "Score : " + score;                   
            let reponseButton =  [
                document.getElementById("btn0"),
                document.getElementById("btn1"),
                document.getElementById("btn2"),
                document.getElementById("btn3"),
            ];
            
                        
            function nouvelleQuestion() {
                
            if(questionPoser.length === questionTableau.length) {
            let i = 0 ;
            i++
            text.innerHTML=`<p>F√©licitation niveau  2  termin√© ! \n score final : ${score}`
         text.showModal();
         cache();
            divElement.innerHTML= "";
            
                setTimeout(function () {
          text.innerHTML=`F√©licitation niveau suivant ! üíê`
              dialog.showModal();
            }
,100)
                return;
            }
            
            let questionIndex= getRandomQuestionIndex();
            debutPremiereQuestion = questionIndex;
            let questionData = questionTableau[debutPremiereQuestion]
            questionElement.innerText = questionData.questions;
            
           
            
 for(let i = 0; i< reponseButton.length; i++ ){
             
              reponseButton[i].innerText= i+ ": " + questionData.result[i] || "";
             }
          }
            
            function getRandomQuestionIndex() {
            
                let questionIndex = Math.floor(Math.random()* questionTableau.length);
                
while (questionPoser.includes(questionIndex)) {
                    questionIndex = Math.floor(Math.random()* questionTableau.length)
                    
                }
                questionPoser.push(questionIndex)
                return questionIndex;
            }
            
            
            function reponse(reponseIndex) {
                let questionData = questionTableau[debutPremiereQuestion];
                if(reponseIndex === questionData.correction ) { 
                    score++
                    function getcookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
      }
    }
  }
  return cookieValue;
  }
                    fetch('/Save_Score/',{
         method : "POST",
         headers: {
            'Content-Type':'application/json',
            'X-csrfToken': getcookie('csrftoken')
            },
         body : JSON.stringify({
            value : score,
            joueur: joueur_id
            })
         })
         .then(res => res.json())
         .then(data => console.log("Reussie"))

                    text.innerHTML=`<p>Vous avez trouver f√©licitations !\n \n la r√©ponse √©tait <strong> ${questionData.result[questionData.correction]}</strong></p>`
                    text.showModal();
                    cache();
                    scoreElement.innerHTML="Score: "+ score;
                   nouvelleQuestion();
                    
                }else {
                    text.innerHTML=`<p>votre r√©ponse est incorrect ! </p>`;
                    text.showModal();
                    cache()
                 score--
             scoreElement.innerHTML="Score : "+ score;
         
                }
            }
            
            function recommencer() {
                debutPremiereQuestion = 0;
                score = 0;
                questionPoser = [];
                scoreElement.innerHTML= "Score: "+ score;
                nouvelleQuestion();
            }
            nouvelleQuestion();
         
        </script>
        
        
        
        
        
        
    </body>
</html>
